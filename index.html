<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>CodeStore by Lobo</title>
  <link rel="icon" type="image/x-icon" href="./icon.png">
  <!-- Open Graph Meta Tags for Social Sharing -->
  <meta property="og:title" content="CodeStore by Lobo" />
  <meta property="og:description" content="OneStop CodeStore - Browse & download code experiments for HTML, PHP, & DSC++. #AITD" />
  <meta property="og:image" content="https://nathanlobo.github.io/icon.png" />
  <meta property="og:url" content="https://nathanlobo.github.io/" />
  <meta property="og:type" content="website" />
  <!-- Twitter Card Meta Tags -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="CodeStore by Lobo" />
  <meta name="twitter:description" content="OneStop CodeStore - Browse & download code experiments for HTML, PHP, & DSC++. #AITD" />
  <meta name="twitter:image" content="https://nathanlobo.github.io/icon.png" />
  <style>
  :root {
    --bg: #0d1117;
    --panel: #0d1117;
    --muted: #8b949e;
    --border: #30363d;
    --accent: #74b5ff;
    --text: #c9d1d9;
    --warning:yellow;
  }
  :root.light {
    --bg: #ffffff;
    --panel: #f6f8fa;
    --muted: #57606a;
    --border: #d0d7de;
    --accent: #0969da;
    --text: #24292f;
    --warning:#ddc400;
  }

  /* CSS for Pop up to ask for name */
  .modal {
    display: none; /* Hidden by default */
    position: fixed; /* Stay in place, even on scroll */
    z-index: 1000; /* Sit on top of everything */
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5); /* Black with 50% opacity */
  }

  /* The modal's content box */
  .modal-content {
    background-color: var(--bg);
    /* Center the modal */
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    
    padding: 20px 8px;
    border: 1px solid var(--text);
    width: 90%;
    max-width: 450px;
    border-radius: 10px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    text-align: center;
  }

  /* Style the form elements */
  #nameForm input[type="text"] {
    width: 80%;
    padding: 12px;
    margin: 15px 0;
    border: 1px solid var(--border);
    border-radius: 5px;
    font-size: 16px;
  }

  #nameForm button {
    background-color: var(--accent);
    color: white;
    padding: 12px 25px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-size: 16px;
    transition: background-color 0.3s;
  }

  #nameForm button:hover {
    background-color: #0056b3;
  }
  /********* Pop up CSS Ends Here *********/


  body { 
    background: var(--bg);
    color: var(--text);
    min-height: 100vh;
    display: flex;
    flex-direction: column; 
  }
  .topbar {
    position: sticky;
    top: 0;
    display:flex; 
    align-items:center;
    padding:8px 0px;
    border-bottom:1px solid var(--border);
    background:var(--panel);
    z-index: 999;
  }
  .btn {
    background:transparent;
    border:1px solid transparent;
    color:var(--muted);
    padding:6px 10px;
    border-radius:6px;
    cursor:pointer; font-weight:700;
  }
  .btn:hover { background-color: #0b64ffab; }

  /* Footer Styles */
  .footer-bar {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    background: var(--panel);
    border-top: 1px solid var(--border);
    padding: 8px;
    z-index: 1000;
    box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
  }
  .footer-content {
    max-width: 900px;
    margin: 0 auto;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap:10px;
  }
  .social-links {
    display: flex;
    gap: 30px;
    align-items: center;
  }
  .social-icon {
    color: var(--muted);
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
  }
  .social-icon:hover {
    color: var(--accent);
    background: rgba(116, 181, 255, 0.1);
    transform: translateY(-2px);
  }
  .footer-text {
    margin: 0;
    font-size: 13px;
    color: var(--muted);
  }
  .footer-title {
    margin: 0;
    font-size: 13px;
    letter-spacing: 2.5px;
    word-spacing: 5px;
    font-weight: 700;
    color: var(--muted);
  }
  /* Add padding to body to prevent content from being hidden behind footer */
  body::after {
    content: '';
    display: block;
    height: 100px;
  }        
  body { font-family: Arial, sans-serif; background: var(--bg); color: var(--text); padding:12px; }
  .link-container { display:flex; flex-direction:column; gap:15px; max-width:900px; margin:auto; margin-top:32px; }
    /* MODIFIED: Changed display to block for full-width internal content */
    .link-block { background:#161d80; color:white; padding:12px 16px; border-radius:8px;
                  display:block; }
    /* MODIFIED: Increased max-width to 100% */
    .link-info { display:flex; flex-direction:column; gap:4px; overflow:hidden; max-width:100%; }
    .link-title { font-weight:700; font-size:15px; }
    /* MODIFIED: Removed truncation CSS (white-space: nowrap, text-overflow: ellipsis) */
    .link-url { 
        font-size:13px; 
        color:rgba(255,255,255,0.95); 
        overflow:initial; 
        text-overflow:initial; 
        white-space:normal; /* Allows text to wrap */
        display:block;
        width: 100%;
    }
    /* NEW CLASS: Used in JS to align content and buttons */
    .file-row { 
        display: flex; 
        flex-wrap: wrap; 
        justify-content: space-between; 
        align-items: center; 
        width: 100%; 
        margin-top: 4px;
        gap: 8px; 
    }
    /* MODIFIED: Added flex-shrink: 0 to prevent buttons from shrinking */
    .button-container { display:flex; gap:8px; flex-shrink:0; }
    .btn { padding:8px 12px; border-radius:5px; border:none; cursor:pointer; font-weight:700; }
    .btn-view, .btn-output, .btn-download { background:#0b66ff; color:white; }
    /* responsive */
    @media (max-width:600px){
      .link-block { flex-direction:column; align-items:flex-start; }
      .button-container { width:100%; justify-content:flex-end; }
      .link-info { max-width:100%; }
    }
    
    /* Tab Navigation Styles */
    .tabs-nav {
      display: flex;
      gap: 8px;
      align-items: center;
    }
    .tab-btn {
      background: none;
      border: none;
      color: var(--muted);
      font-weight: 700;
      font-size: 16px;
      padding: 6px 18px;
      border-radius: 6px 6px 0 0;
      cursor: pointer;
      transition: background 0.2s, color 0.2s;
      margin-bottom: -1px;
      border-bottom: 2px solid transparent;
    }
    .tab-btn.active, .tab-btn:hover {
      color: var(--accent);
      background: var(--bg);
      border-bottom: 2px solid var(--accent);
    }
    /* Toggle Switch Styles from toggle.html */
    .theme-switch-wrapper {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 4px 8px;
      border-radius: 5px;
      font-size: 12px;
      gap: 2px;
    }
    #mode-text {
      margin-bottom: 2px;
      font-weight: bold;
      font-size: 12px;
    }
    .theme-switch {
      position: relative;
      display: inline-block;
      width: 36px;
      height: 20px;
    }
    .theme-switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }
    .slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #ccc;
      transition: 0.4s;
    }
    .slider:before {
      position: absolute;
      content: "";
      height: 14px;
      width: 14px;
      left: 3px;
      bottom: 3px;
      background-color: #fff;
      transition: 0.4s;
    }
    input:checked + .slider {
      background-color: #66bb6a;
    }
    input:checked + .slider:before {
      transform: translateX(16px);
    }
    .slider.round {
      border-radius: 20px;
    }
    .slider.round:before {
      border-radius: 50%;
    }
  </style>
</head>
<body>
  <h2 style="color:var(--warning); margin: 1px 2px; font-size: 16px;">Website under construction</h2>
  <p>Working on automatically getting Outputs for <strong>DSC++</strong> within the website</p>
  <div class="topbar">
    <div class="tabs-nav">
      <button class="tab-btn active" data-tab="HTML">HTML</button>
      <button class="tab-btn" data-tab="PHP">PHP</button>
      <button class="tab-btn" data-tab="DSC++">DSC++</button>
    </div>
    <div class="theme-switch-wrapper" style="margin-left:auto;">
      <span id="mode-text">Dark</span>
      <label class="theme-switch" for="checkbox">
        <input type="checkbox" id="checkbox" />
        <div class="slider round"></div>
      </label>
    </div>
  </div>
  <div id="analyticsModal" class="modal">
    <div class="modal-content">
      <p>Would like to know your name for analytics purposes.</p>
      <form id="nameForm">
        <input type="text" id="userName" name="userName" placeholder="Enter your name" required autofocus>
        <button type="submit">Submit</button>
      </form>
    </div>
  </div>
  <div id="linkContainer" class="link-container">Loading...</div>
  <script>
    const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbwgXbi_LPG8TjWaOjeT2cPUWeoBRJ3U0DSrJTy3ikAn0hdXJ7nSXedTx_mu3xbHQLLm/exec';
    window.onload = function() {
      const storedName = localStorage.getItem('userName');
      const currentTab = localStorage.getItem('selectedTab') || 'HTML';

      if (storedName) {
        console.log("Welcome back, " + storedName + "! Logging your visit.");
        const visitType = 'Return Visit';
        // Send immediately for returning visitors
        sendAnalyticsData(storedName, visitType, currentTab);
      } else {
        console.log("First visit. Showing modal.");
        const modal = document.getElementById("analyticsModal");
        const form = document.getElementById("nameForm");
        modal.style.display = "block";
        form.addEventListener("submit", function(event) {
          event.preventDefault();
          const userName = document.getElementById("userName").value.trim();
          if (userName) {
            localStorage.setItem('userName', userName);
            modal.style.display = "none";
            // Send right after the user submits their name on first visit
            sendAnalyticsData(userName, 'First Visit', localStorage.getItem('selectedTab') || 'HTML');
          }
        });
      }
    };
    function sendAnalyticsData(name, visitType, visitPage) {
        const url = `${GOOGLE_SCRIPT_URL}?userName=${encodeURIComponent(name)}
                                          &visitType=${encodeURIComponent(visitType)}
                                          &visitPage=${encodeURIComponent(visitPage)}`;
        fetch(url, {
            method: 'POST',
            mode: 'no-cors' // Required for Google Apps Script
        })
        .then(() => {
            // Note: With 'no-cors' mode, we can't read the response
            // But the data is still sent successfully
            console.log(`Analytics data sent: ${name} - ${visitType}`);
        })
        .catch(error => {
            console.error('Error sending analytics data:', error);
        });
    }
    // JS to handle pop up ends here

    // Experiment Data
    const dscppExpts = [{
        name: "Expt 1",
        files: ["DSCpp/expt1/overloading_1a.cpp", 
                "DSCpp/expt1/overloading_1b.cpp",
                "DSCpp/expt1/overloading_1c.cpp",
                "DSCpp/expt1/overloading_1d.cpp"],
        filedesc:["Expt 1a - To store and manage college details.",
                  "Expt 1b - To represent a bank account with basic operations.",
                  "Expt 1c - To calculate area of different shapes using function overloading.",
                  "Expt 1d - To calculate averages using function overloading."]
      },
      {
        name: "Expt 2",
        files: ["DSCpp/expt2/expt2a.cpp", 
                "DSCpp/expt2/expt2b.cpp",
                "DSCpp/expt2/expt2c.cpp",
                "DSCpp/expt2/expt2d.cpp",
                "DSCpp/expt2/expt2e.cpp"],
        filedesc:["Expt 2a - To create a class box and use friend function to calculate volume.",
                  "Expt 2b - To create 2 student classes & use a friend function to access & calculate their total marks.",
                  "Expt 2c - To create a class account & use a friend function to transfer funds from 1 acc to other, ensuring the source account has sufficient balance.",
                  "Expt 2d - To create 2 classes A & B, let B be friend of A, so that it can access & display private members of B.",
                  "Expt 2e - To create classes account & bank, & to be able to access and modify the balance."]
      },
      {
        name: "Expt 3",
        files: ["DSCpp/expt3/expt3.1.a.cpp",
                "DSCpp/expt3/expt3.1.b.cpp",
                "DSCpp/expt3/expt3.2.a.cpp",
                "DSCpp/expt3/expt3.2.b.cpp",
                "DSCpp/expt3/expt3.3.a.cpp",
                "DSCpp/expt3/expt3.3.b.cpp",
                "DSCpp/expt3/expt3.4.a.cpp",
                "DSCpp/expt3/expt3.5.a.cpp",
                "DSCpp/expt3/expt3.6.a.cpp",
                "DSCpp/expt3/expt3.7.a.cpp"],
        filedesc:["Expt 3.1a - Single Inheritance in Public Mode",
                  "Expt 3.1b - Public Inheritance Example with Employee and Programmer",
                  "Expt 3.2a - Single Inheritance in Private Mode",
                  "Expt 3.2b - Private Inheritance Example with Bank and Account",
                  "Expt 3.3a - Making Private Members Inheritable Using Protected Access",
                  "Expt 3.3b - Protected Member Inheritance Example with Student and Marks",
                  "Expt 3.4a - Multilevel Inheritance",
                  "Expt 3.5a - Multiple Inheritance",
                  "Expt 3.6a - Hierarchical Inheritance in C++ (University Example)",
                  "Expt 3.7a - Hybrid Inheritance in C++ (University Example)"]
      },
      {
        name: "Expt 4",
        files: ["DSCpp/expt4/expt4a-linklist",
                "DSCpp/expt4/expt4b-doublelinklist"],
        filedesc:["Expt 4a - Implementation of Singly Linked List",
                  "Expt 4b - Implementation of Double Linked List"]
      },
      {
        name: "Expt 5",
        files: ["DSCpp/expt5-stack"],
        filedesc:["Expt 5 - Implementation of Stack"]
      },
      {
        name: "Expt 6",
        files: ["DSCpp/expt6-queue"],
        filedesc:["Expt 5 - Implementation of Queue"]
      }];
    const htmlExpts = [
      {
        name: "Expt 1",
        files: ["WD-HTML/Expt-1/expt1a.html",
                "WD-HTML/Expt-1/expt1b.html",
                "WD-HTML/Expt-1/expt1c.html"],
        filedesc:["Expt 1a - Basic HTML Tags",
                  "Expt 1b - All Text Tags",
                  "Expt 1c - All Table Tags (Basic)"]
      },
      {
        name: "Expt 2",
        files: ["WD-HTML/Expt-2/expt2a.html",
                "WD-HTML/Expt-2/expt2b.html"],
        filedesc:["Expt 2a - Class Timetable",
                  "Expt 2b - Table with All Table Tags (Own Idea)"]
      },
      {
        name: "Expt 3",
        files: ["WD-HTML/Expt-3/expt3-login.html",
                "WD-HTML/Expt-3/expt3-register.html"],
        filedesc:["Expt 3a - Login Page",
                  "Expt 3b - Registeration / Form Page"]
      },
      {
        name: "Expt 4",
        files: ["WD-HTML/Expt-4/all_css.html","WD-HTML/Expt-4/styles.css"],
        filedesc:["Expt 4 - All Cascading Stylesheet Tags","External .CSS - All Cascading Stylesheet Tags"]
      },
      {
        name: "Expt 5",
        files: ["WD-HTML/Expt-5/expt5.1-odd-even.html",
                "WD-HTML/Expt-5/expt5.2-print-day-of-week.html",
                "WD-HTML/Expt-5/expt5.3-simple-calc.html",
                "WD-HTML/Expt-5/expt5.4-for-loop.html",
                "WD-HTML/Expt-5/expt5.5-for-in-loop.html",
                "WD-HTML/Expt-5/expt5.6-for-of-loop.html",
                "WD-HTML/Expt-5/expt5.7-loop-over-string.html",
                "WD-HTML/Expt-5/expt5.8-multiply-using-func.html",
                "WD-HTML/Expt-5/expt5.9-add-using-func-with-parameter.html"
        ],
        filedesc:["Expt 5.1 - WAJS program to check if entered number is odd or even using if-else",
                  "Expt 5.2 - WAJS program to print day of the week corresponding to entered number",
                  "Expt 5.3 - WAJS program to implement simple calculator using switch statement",
                  "Expt 5.4 - WAJS program to implement For Loop",
                  "Expt 5.5 - WAJS program to implement For In Loop",
                  "Expt 5.6 - WAJS program to implement For Of Loop",
                  "Expt 5.7 - WAJS program to implement Loop Over a String",
                  "Expt 5.8 - WAJS program to create a function to Multiply",
                  "Expt 5.9 - WAJS program to create a function to add with parameters"
        ]
      },
      {
        name: "Expt 6",
        files: ["WD-HTML/Expt-6/expt6-form-validation-js.html",],
        filedesc:["Expt 6 - Implementation of different Javascript functions for validation."]
      },
      {
        name: "Expt 7 - Implementation of JS Functions for validation of user login and registration form",
        files: ["WD-HTML/Expt-7/expt7-login.html","WD-HTML/Expt-7/expt7-register.html"],
        filedesc:["Expt 7a - JS User Login Form Validation", "Expt 7b - JS Registration Form Validation"],
      },
      {
        name: "Expt 8 - Implementation of JSON on the Client Framework",
        files: ["WD-HTML/Expt-8/8.1-parse-json.html",
                "WD-HTML/Expt-8/8.2-parse-json-array.html",
                "WD-HTML/Expt-8/8.3-stringify-json.html",
                "WD-HTML/Expt-8/8.4-stringify-json-array.html",
                "WD-HTML/Expt-8/8.5-accessing-object-dot-notation.html",
                "WD-HTML/Expt-8/8.6-accessing-object-bracket-notation.html",
                "WD-HTML/Expt-8/8.7-json-array-loop.html"],
        filedesc:["Expt 8.1 - Implemenation of JSON Parse Method (String to Object)",
                  "Expt 8.2 - Implemenation of JSON Parse Method with Array",
                  "Expt 8.3 - Implemenation of JSON Stringify Method (Object to String)",
                  "Expt 8.4 - Implemenation of JSON Stringify Method with Array",
                  "Expt 8.5 - Accessing JSON Object using Dot Notation eg: x.key",
                  "Expt 8.6 - Accessing JSON Object using Bracket Notation eg: ['key']",
                  "Expt 8.7 - Looping through JSON Array"]
      },
      {
        name: "Expt 9 - Implementation of JSON on Server Side",
        files: ["WD-HTML/Expt-9/xmlhttprequest.html","WD-HTML/Expt-9/network1.json"],
        filedesc:["Expt 6 - Implementation of different Javascript functions for validation.", "JSON File containing data for XMLHttpRequest."],
        outputLinks: ["https://nathanlobo.byethost4.com/Expt-9/xmlhttprequest.html"]
      },
    ];
    const phpExpts = [
      {
        name: "Expt 1",
        files: ["WD-PHP/expt1_basic_php/basics.php"],
        filedesc:["Expt 1 - Implementation of basic PHP Programs."],
        outputLinks: [
          "https://nathanlobo.byethost4.com/expt1_basic_php/basics.php",
          "https://nathanlobo.byethost4.com/expt1_basic_php/variable.php"
        ]
      },
      {
        name: "Expt 2",
        files: ["WD-PHP/expt2_request_method/get.html",
                "WD-PHP/expt2_request_method/post.html",
                "WD-PHP/expt2_request_method/request.html"],
        filedesc:["Expt 2 - Implementation of PHP GET method.",
                  "Expt 2 - Implementation of PHP POST method.",
                  "Expt 2 - Implementation of PHP REQUEST method."],
        outputLinks: [
          "https://nathanlobo.byethost4.com/expt2_request_method/get.html",
          "https://nathanlobo.byethost4.com/expt2_request_method/post.html",
          "https://nathanlobo.byethost4.com/expt2_request_method/request.html",
        ]
      },
      {
        name: "Expt 3",
        files: ["WD-PHP/mysql/expt3_mysql_basic.php",
                "WD-PHP/mysql/expt3_create_database_table.sql",
                "WD-PHP/mysql/expt3_to_view_table_delete_row.sql",],
        filedesc:["Expt 3 - Implementation of PHP & Connection to MySQL",
                  "Expt 3 - MySQL Code to Create database & table",
                  "Expt 3 - MySQL Code to view table, delete row & delete database"],
        outputLinks: ["https://nathanlobo.byethost4.com/mysql/expt3_mysql_basic.php"]
      },
      {
        name: "Expt 4",
        files: ["WD-PHP/mysql/expt4_mysql_form_insert.php"],
        filedesc:["Expt 4 - Implementation of PHP Insert & View Operation"],
        outputLinks: ["https://nathanlobo.byethost4.com/mysql/expt4_mysql_form_insert.php"]
      },
      {
        name: "Expt 5",
        files: ["WD-PHP/mysql/expt5_mysql_form_edit.php"],
        filedesc:["Expt 5 - Implementation of PHP Update Operation"],
        outputLinks: ["https://nathanlobo.byethost4.com/mysql/expt5_mysql_form_edit.php"]
      },
      {
        name: "Expt 6",
        files: ["WD-PHP/mysql/expt6_mysql_delete.php"],
        filedesc:["Expt 6 - Implementation of PHP Delete Operation"],
        outputLinks: ["https://nathanlobo.byethost4.com/mysql/expt6_mysql_delete.php"]
      },
      {
        name: "Not an Expt",
        files: ["WD-PHP/mysql/mysql_insert_edit_delete.php"],
        filedesc:["Implementation of PHP Insert, Edit & Delete Operation"],
        outputLinks: ["https://nathanlobo.byethost4.com/mysql/mysql_insert_edit_delete.php"]
      },
      {
        name: "Expt 7",
        files: ["WD-PHP/expt7-cookies.php"],
        filedesc:["Expt 7 - Implementation of Cookies using PHP"],
        outputLinks: ["https://nathanlobo.byethost4.com/expt7-cookies.php"]
      },
      {
        name: "Expt 8",
        files: ["WD-PHP/expt8-sessions.php"],
        filedesc:["Expt 8 - Implementation of Sessions using PHP"],
        outputLinks: ["https://nathanlobo.byethost4.com/expt8-sessions.php"]
      },
    ];
    const zipDownloads = {
      "WD-HTML/Expt-1": "https://github.com/user-attachments/files/22573058/Expt-1.zip",
      "WD-HTML/Expt-1/expt1a.html": "https://github.com/user-attachments/files/22573164/Expt-1a.zip",
      "WD-HTML/Expt-2": "https://github.com/user-attachments/files/22573296/Expt-2.zip",
      "WD-HTML/Expt-2/expt2b.html": "https://github.com/user-attachments/files/22573297/Expt-2b.zip",
      "WD-HTML/Expt-3": "https://github.com/user-attachments/files/22872136/Expt-3.zip",
      "WD-HTML/Expt-3/expt3-login.html": "https://github.com/user-attachments/files/22872138/Expt3-login.zip",
      "WD-HTML/Expt-3/expt3-register.html": "https://github.com/user-attachments/files/22573836/Expt3-register.zip",
      "WD-HTML/Expt-4/all_css.html": "https://github.com/user-attachments/files/22573312/Expt-4.zip",
    };
    const owner = "nathanlobo";
    const repo = "CodeStore";
    const branch = "main";
    const container = document.getElementById('linkContainer');
    async function downloadFile(rawUrl, filename) {
      try {
        const res = await fetch(rawUrl);
        if (!res.ok) throw new Error(`https ${res.status}`);
        const blob = await res.blob();
        const blobUrl = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = blobUrl;
        a.download = filename || rawUrl.split('/').pop();
        a.style.display = 'none';
        document.body.appendChild(a);
        a.click();
        a.remove();
        setTimeout(() => URL.revokeObjectURL(blobUrl), 1500);
      } catch (err) {
        console.error('Download failed, opening raw URL instead:', err);
        window.open(rawUrl, '_blank');
      }
    }

    // Render experiment cards
    function renderExperiments(expts) {
      if (!Array.isArray(expts) || expts.length === 0) {
        container.innerHTML = '<p>No experiments defined.</p>';
        return;
      }
      container.innerHTML = '';
      expts.forEach((exp, idx) => {
        const block = document.createElement('div');
        block.className = 'link-block';

        const info = document.createElement('div');
        info.className = 'link-info';

        const title = document.createElement('div');
        title.className = 'link-title';
        title.textContent = exp.name || `Experiment ${idx+1}`;

        info.appendChild(title);

        // List files for this experiment
        if (Array.isArray(exp.files) && exp.files.length > 0) {
          exp.files.forEach((filePath, fileIdx) => {
            const fileDiv = document.createElement('div');
            fileDiv.className = 'file-row';

            // Use filedesc if available, else fallback to filePath
            const urlA = document.createElement('a');
            urlA.className = 'link-url';
            urlA.href = `https://github.com/${owner}/${repo}/blob/${branch}/${encodeURIComponent(filePath).replace(/%2F/g, '/')}`;
            let desc = (Array.isArray(exp.filedesc) && exp.filedesc[fileIdx]) ? exp.filedesc[fileIdx] : filePath;
            urlA.textContent = desc;
            urlA.target = '_blank';
            urlA.rel = 'noopener noreferrer';

            fileDiv.appendChild(urlA);

            // Button container for Code, Output, Download
            const btnContainer = document.createElement('div');
            btnContainer.className = 'button-container';
            btnContainer.style.gap = '4px';

            // Code button
            const codeBtn = document.createElement('button');
            codeBtn.className = 'btn btn-view';
            codeBtn.textContent = 'Code';
            codeBtn.addEventListener('click', () => {
              localStorage.setItem('filePath', filePath);
              localStorage.setItem('experimentName', exp.name || `Experiment ${idx+1}`);
              localStorage.setItem('fileDescription', desc); // Store file description
              window.location.href = 'view.html';
            });

            // Output button logic
              let showOutputBtn = true;
              // Hide Output button for 2nd and 3rd files of Expt 3 in PHP experiments
              if (
                localStorage.getItem('selectedTab') === 'PHP' &&
                exp.name === 'Expt 3' &&
                (fileIdx === 1 || fileIdx === 2)
              ) {
                showOutputBtn = false;
              }
              if (
                localStorage.getItem('selectedTab') === 'HTML' &&
                exp.name === 'Expt 4' &&
                (fileIdx === 1)
              ) {
                showOutputBtn = false;
              }
              if (
                localStorage.getItem('selectedTab') === 'HTML' &&
                exp.name.includes('Expt 9') &&
                (fileIdx === 1)
              ) {
                showOutputBtn = false;
              }
              if (showOutputBtn) {
                const outputBtn = document.createElement('button');
                outputBtn.className = 'btn btn-output';
                outputBtn.textContent = 'Output';
                if (localStorage.getItem('selectedTab') === 'DSC++') {
                  outputBtn.disabled = true;
                  outputBtn.style.display = 'none';
                  outputBtn.style.opacity = '0.5';
                  outputBtn.title = 'Output temporarily disabled';
                } else if (Array.isArray(exp.outputLinks) && exp.outputLinks[fileIdx]) {
                  outputBtn.addEventListener('click', () => {
                    const outputUrl = exp.outputLinks[fileIdx];
                    // Track analytics for output button click
                    const storedName = localStorage.getItem('userName');
                    if (storedName) {
                      sendAnalyticsData(storedName, 'Output', outputUrl);
                    }
                    window.open(outputUrl, '_blank');
                  });
                } else {
                  outputBtn.addEventListener('click', () => {
                    const outputUrl = `https://nathanlobo.github.io/CodeStore/${filePath}`;
                    // Track analytics for output button click
                    const storedName = localStorage.getItem('userName');
                    if (storedName) {
                      sendAnalyticsData(storedName, 'Output', outputUrl);
                    }
                    window.open(outputUrl, '_blank');
                  });
                }
                btnContainer.appendChild(codeBtn);
                btnContainer.appendChild(outputBtn);
              } else {
                btnContainer.appendChild(codeBtn);
              }

            const rawUrl = `https://raw.githubusercontent.com/${owner}/${repo}/${branch}/${encodeURIComponent(filePath).replace(/%2F/g, '/')}`;
            const downloadBtn = document.createElement('button');
            downloadBtn.className = 'btn btn-download';
            downloadBtn.textContent = 'Download';

            // Check if this file should trigger a release zip download
            if (zipDownloads[filePath]) {
              const zipUrl = zipDownloads[filePath];
              downloadBtn.addEventListener('click', () => {
                // Track analytics for download button click
                const storedName = localStorage.getItem('userName');
                if (storedName) {
                  sendAnalyticsData(storedName, 'Download', zipUrl);
                }
                // Use the last part of the URL as filename
                const zipFileName = zipUrl.split('/').pop();
                downloadFile(zipUrl, zipFileName);
              });
            } else {
              downloadBtn.addEventListener('click', () => {
                // Track analytics for download button click
                const storedName = localStorage.getItem('userName');
                if (storedName) {
                  sendAnalyticsData(storedName, 'Download', filePath);
                }
                downloadFile(rawUrl, filePath.split('/').pop());
              });
            }

            btnContainer.appendChild(downloadBtn);
            fileDiv.appendChild(btnContainer);

            info.appendChild(fileDiv);
          });
        } else {
          const noFiles = document.createElement('div');
          noFiles.textContent = 'No files listed.';
          info.appendChild(noFiles);
        }

        block.appendChild(info);
        container.appendChild(block);
      });
    }

    // Tab switching logic with experiment filtering and persistence
    function activateTab(tabName, trackAnalytics = false) {
      document.querySelectorAll('.tab-btn').forEach(b => {
        if (b.dataset.tab === tabName) {
          b.classList.add('active');
        } else {
          b.classList.remove('active');
        }
      });
      localStorage.setItem('selectedTab', tabName);
      
      // Track tab switch in analytics if requested
      if (trackAnalytics) {
        const storedName = localStorage.getItem('userName');
        if (storedName) {
          sendAnalyticsData(storedName, 'Tab Switch', tabName);
        }
      }
      
      if (tabName === 'HTML') {
        renderExperiments(htmlExpts);
      } else if (tabName === 'DSC++') {
        renderExperiments(dscppExpts);
      } else if (tabName === 'PHP') {
        renderExperiments(phpExpts);
      } else {
        container.innerHTML = '<p>No experiments defined for this tab.</p>';
      }
    }

    document.querySelectorAll('.tab-btn').forEach(btn => {
      btn.addEventListener('click', function() {
        activateTab(this.dataset.tab, true); // Enable analytics tracking on manual tab clicks
      });
    });

    // On page load, restore last selected tab or default to HTML
    const lastTab = localStorage.getItem('selectedTab') || 'HTML';
    activateTab(lastTab);
  </script>
              <script>
              // Toggle switch logic from toggle.html, adapted for index.html
              document.addEventListener('DOMContentLoaded', function() {
                const checkbox = document.getElementById('checkbox');
                const modeText = document.getElementById('mode-text');
                const root = document.documentElement;
                // 1. Check Local Storage for preference
                if (localStorage.getItem('theme') === null) {
                  // No preference stored, check system preference
                  if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                    localStorage.setItem('theme', 'dark-mode');
                  } else {
                    localStorage.setItem('theme', 'light-mode');
                  }
                }
                const currentTheme = localStorage.getItem('theme');
                if (currentTheme === 'dark-mode') {
                  root.classList.remove('light');
                  checkbox.checked = true;
                  modeText.textContent = 'Dark';
                } else {
                  root.classList.add('light');
                  checkbox.checked = false;
                  modeText.textContent = 'Light';
                }
                // 2. Event Listener for the toggle
                checkbox.addEventListener('change', function() {
                  if (this.checked) {
                    root.classList.remove('light');
                    localStorage.setItem('theme', 'dark-mode');
                    modeText.textContent = 'Dark';
                    // Analytics: Dark Mode
                    const storedName = localStorage.getItem('userName');
                    if (storedName) {
                      sendAnalyticsData(storedName, 'Dark Mode', '');
                    }
                  } else {
                    root.classList.add('light');
                    localStorage.setItem('theme', 'light-mode');
                    modeText.textContent = 'Light';
                    // Analytics: Light Mode
                    const storedName = localStorage.getItem('userName');
                    if (storedName) {
                      sendAnalyticsData(storedName, 'Light Mode', '');
                    }
                  }
                });
              });
              </script>

  <!-- Footer Bar -->
  <footer class="footer-bar">
    <div class="footer-content">
      <p class="footer-title">Contact for Queries</p>
      <div class="social-links">
        <a href="https://wa.me/+919689137817" class="social-icon" title="WhatsApp" target="_blank">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
            <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/>
          </svg>
        </a>
        <a href="https://instagram.com/nathanlobo.22" class="social-icon" title="Instagram" target="_blank">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
            <path d="M7.8 2h8.4C19.4 2 22 4.6 22 7.8v8.4a5.8 5.8 0 0 1-5.8 5.8H7.8C4.6 22 2 19.4 2 16.2V7.8A5.8 5.8 0 0 1 7.8 2m-.2 2A3.6 3.6 0 0 0 4 7.6v8.8C4 18.39 5.61 20 7.6 20h8.8a3.6 3.6 0 0 0 3.6-3.6V7.6C20 5.61 18.39 4 16.4 4H7.6m9.65 1.5a1.25 1.25 0 0 1 1.25 1.25A1.25 1.25 0 0 1 17.25 8 1.25 1.25 0 0 1 16 6.75a1.25 1.25 0 0 1 1.25-1.25M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3z"/>
          </svg>
        </a>
        <a href="mailto:lobonathan2209@gmail.com" class="social-icon" title="Gmail">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
            <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/>
          </svg>
        </a>
        <a href="https://github.com/nathanlobo" class="social-icon" title="GitHub" target="_blank">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2z"/>
          </svg>
        </a>
      </div>
      <p class="footer-text">© 2025 Nathan Lobo. All rights reserved.</p>
    </div>
  </footer>
  <script>
  document.addEventListener('DOMContentLoaded', function() {
    // Add analytics for social button clicks
    const socialSelectors = [
      { selector: 'a[title="WhatsApp"]', type: 'WhatsApp' },
      { selector: 'a[title="Instagram"]', type: 'Instagram' },
      { selector: 'a[title="GitHub"]', type: 'GitHub' },
      { selector: 'a[title="Gmail"]', type: 'Email' }
    ];
    socialSelectors.forEach(({ selector, type }) => {
      const btn = document.querySelector(selector);
      if (btn) {
        btn.addEventListener('click', function() {
          const storedName = localStorage.getItem('userName');
          if (storedName) {
            sendAnalyticsData(storedName, type, '');
          }
        });
      }
    });
  });
  </script>
</body>
</html>
